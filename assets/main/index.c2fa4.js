window.__require=function t(e,n,o){function r(c,a){if(!n[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=n[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,n,o)}return n[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<o.length;c++)r(o[c]);return r}({AutoResolution:[function(t,e,n){"use strict";cc._RF.push(e,"1963feMZtBPyIDDbrjG5Koo","AutoResolution");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.baseSize=cc.size(1334,750),e.maxSize=cc.size(1600,650),e}var n;return r(e,t),n=e,e.default=new n,i([a],e)}(cc.Component));n.default=s,cc._RF.pop()},{}],CommonUtils:[function(t,e,n){"use strict";cc._RF.push(e,"1a820g7WotG5b4R6VFHnSPe","CommonUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.CommonUtils=void 0;var o=function(){this.startTime=-1,this.timeOffset=0},r=function(){function t(){}return t.getTimer=function(){return t.timeRecorder.startTime<0&&(t.timeRecorder.startTime=Date.now()),Date.now()-t.timeRecorder.startTime},t.getClassName=function(t){if(null!=t)return null!=t.__CUSTOM_NAME?t.__CUSTOM_NAME:cc.js.getClassName(t)},t.getRandomList=function(t,e){void 0===e&&(e=-1);var n,o,r=t;(e<0||e>t.length)&&(e=t.length);for(var i=0;i<e;i++)n=i+Math.floor(Math.random()*(r.length-i-1)),o=r[i],r[i]=r[n],r[n]=o;return r},t.randomString=function(t){t=t||8;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length,o="",r=0;r<t;r++)o+=e.charAt(Math.floor(Math.random()*n));return o},t.timeRecorder=new o,t}();n.CommonUtils=r,cc._RF.pop()},{}],Constants:[function(t,e,n){"use strict";cc._RF.push(e,"067c8zq//tIA5Hn1yxvTk5C","Constants"),Object.defineProperty(n,"__esModule",{value:!0}),n.characterAnims=n.itemHookName=n.explosionRadius=n.uniScale=void 0;var o=cc._decorator;o.ccclass,o.property,n.uniScale=2,n.explosionRadius=3,n.itemHookName=["ROCK_SMALL","ROCK_MEDIUM","ROCK_LARGE","GOLD_SMALL","GOLD_MEDIUM","GOLD_LARGE","DIAMOND_SMALL","DIAMOND_MEDIUM","BAG","TNT","SKE_HEAD","SKE_BONE","MOLE","MOLE_DIA_SMALL","MOLE_DIA_MEDIUM"],n.characterAnims={MINER_DOWN:0,MINER_UP:1,MINER_STR:2,MINER_THROW:3},cc._RF.pop()},{}],CustomFontLabel:[function(t,e,n){"use strict";cc._RF.push(e,"e03a3xlg2VHZ7GswqFSd2/2","CustomFontLabel");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultCacheMode=cc.Label.CacheMode.NONE,e}var n;return r(e,t),n=e,e.prototype.onLoad=function(){this.defaultCacheMode=this.cacheMode},e.prototype.start=function(){"km"===n.lang?this.cacheMode=cc.Label.CacheMode.NONE:this.cacheMode=this.defaultCacheMode,this.font=n.mapFonts.get(n.lang)||this.font,this.useSystemFont=!1},e.mapFonts=new Map,e.lang="en",n=i([a],e)}(cc.Label));n.default=s,cc._RF.pop()},{}],DataMgr:[function(t,e,n){"use strict";cc._RF.push(e,"8a225lER3xMEqDVIRDPNVWj","DataMgr");var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{s(o.next(t))}catch(e){i(e)}}function a(t){try{s(o.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,a)}s((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.DataManager=void 0;var c=cc.JsonAsset,a=cc.resources,s=cc._decorator.ccclass,l=function(){function t(){this._objects=null,this._characters=null,this._skills=null}var e;return e=t,Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),t.prototype.loadAll=function(){return r(this,void 0,Promise,function(){var t=this;return i(this,function(e){switch(e.label){case 0:return[4,Promise.all([this.loadJSON("db/itemHooks",function(e){return t._objects=e}),this.loadJSON("db/characters",function(e){return t._characters=e}),this.loadJSON("db/skills",function(e){return t._skills=e})])];case 1:return e.sent(),[2,[this._objects,this._characters,this._skills]]}})})},t.prototype.loadJSON=function(t,e){return new Promise(function(n,o){a.load(t,c,function(r,i){if(r)return console.error("[DataManager] Load failed: "+t,r),void o(r);e(i.json),n()})})},t.prototype.getObjectById=function(t){return this._objects&&Object.values(this._objects).find(function(e){return e.id===t})||null},t.prototype.getAllObjects=function(){return this._objects},t.prototype.getCharacterById=function(t){return this._characters&&this._characters[t]||null},t.prototype.getAllCharacters=function(){return this._characters},t.prototype.getSkillById=function(t){return this._skills&&this._skills[t]||null},t.prototype.getAllSkills=function(){return this._skills},e=o([s()],t)}();n.DataManager=l,cc._RF.pop()},{}],FontConfig:[function(t,e,n){"use strict";cc._RF.push(e,"a59b1jAHFVBS67N6NhSOaj1","FontConfig");var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,c=r.property,a=function(){function t(){this.key="en",this.path=""}var e;return e=t,t.create=function(t,n){var o=new e;return o.key=t,o.path=n,o},o([c()],t.prototype,"key",void 0),o([c()],t.prototype,"path",void 0),e=o([i],t)}();n.default=a,cc._RF.pop()},{}],GamePlayCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"f34978+ZRFPE6toBNMD/VVX","GamePlayCtrl");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{s(o.next(t))}catch(e){i(e)}}function a(t){try{s(o.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,a)}s((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.GameMode=void 0;var s,l=t("../modules/explosion"),u=t("../modules/itemHook"),p=t("../utils/LanguageManager"),f=t("../i18n/i18n"),h=t("../i18n/LabelLocalized"),d=t("../modules/shop"),y=t("../modules/playToast"),g=t("../modules/buffs"),_=t("../modules/player"),v=t("../core/DataMgr"),m=cc._decorator,b=m.ccclass,w=m.property;(function(t){t[t.SINGLE=1]="SINGLE",t[t.PVP=2]="PVP"})(s=n.GameMode||(n.GameMode={}));var O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemSpace=null,e.arrTitles=[],e.arrValues=[],e.btn_Skill=null,e.playerArr=[],e.shop=null,e.playToast=null,e.itemHookPrf=null,e.explosionPrf=null,e.timeFunc=null,e.gameMode=s.PVP,e.timeNow=0,e.clientPlayerScore=0,e.levelScoreEarn=0,e.clientLevel=1,e.clientPlayerTnt=5,e.canThrowTnt=!1,e.isAddTnt=!1,e.isStrengthUp=!1,e.isRockUp=!1,e.isLuckUp=!1,e.isDiamondUp=!1,e.i18n=f,e.mapTest=[{x:-742,y:123,id:0},{x:-679,y:295,id:0},{x:-656,y:-215,id:0},{x:-623,y:145,id:0},{x:-358,y:-89,id:0},{x:-274,y:84,id:0},{x:-148,y:269,id:0},{x:-74,y:-33,id:0},{x:-55,y:-206,id:0},{x:-50,y:-105,id:0},{x:43,y:123,id:0},{x:87,y:171,id:0},{x:148,y:194,id:0},{x:231,y:5,id:0},{x:484,y:-190,id:0},{x:508,y:317,id:0},{x:578,y:278,id:0},{x:590,y:-39,id:0},{x:738,y:155,id:0},{x:-650,y:57,id:1},{x:-541,y:0,id:1},{x:-400,y:-166,id:1},{x:-310,y:-249,id:1},{x:-282,y:284,id:1},{x:78,y:310,id:1},{x:87,y:-187,id:1},{x:233,y:197,id:1},{x:277,y:300,id:1},{x:454,y:0,id:1},{x:555,y:179,id:1},{x:692,y:293,id:1},{x:706,y:5,id:1},{x:717,y:-102,id:1},{x:24,y:20,id:2},{x:-142,y:130,id:2},{x:-370,y:165,id:2},{x:-548,y:277,id:2},{x:-595,y:-107,id:2},{x:-170,y:-280,id:2},{x:365,y:-159,id:2},{x:406,y:287,id:2},{x:676,y:-235,id:2},{x:-743,y:313,id:3},{x:-612,y:-299,id:3},{x:-574,y:179,id:3},{x:-447,y:242,id:3},{x:-202,y:331,id:3},{x:86,y:228,id:3},{x:313,y:-249,id:3},{x:313,y:-324,id:3},{x:442,y:-318,id:3},{x:528,y:-17,id:3},{x:726,y:210,id:3},{x:740,y:-316,id:3},{x:754,y:-184,id:3},{x:-744,y:40,id:4},{x:-695,y:-34,id:4},{x:-508,y:-200,id:4},{x:-466,y:-100,id:4},{x:-246,y:10,id:4},{x:-195,y:-186,id:4},{x:-30,y:114,id:4},{x:160,y:-70,id:4},{x:205,y:-180,id:4},{x:435,y:170,id:4},{x:630,y:228,id:4},{x:-688,y:213,id:5},{x:-456,y:-287,id:5},{x:-418,y:-6,id:5},{x:-61,y:116,id:5},{x:-55,y:304,id:5},{x:-20,y:-285,id:5},{x:215,y:-280,id:5},{x:264,y:-73,id:5},{x:322,y:84,id:5},{x:-727,y:-287,id:6},{x:-472,y:183,id:6},{x:-391,y:303,id:6},{x:-257,y:173,id:6},{x:-110,y:21,id:6},{x:-77,y:210,id:6},{x:86,y:-312,id:7},{x:422,y:-257,id:7},{x:483,y:-268,id:7},{x:612,y:-322,id:7},{x:629,y:-133,id:7},{x:707,y:103,id:7},{x:-720,y:-147,id:9},{x:-518,y:100,id:9},{x:-169,y:-63,id:9},{x:5,y:202,id:9},{x:160,y:88,id:9},{x:560,y:-188,id:9},{x:580,y:70,id:9},{x:-597,y:-229,id:10},{x:-297,y:-147,id:10},{x:-208,y:233,id:10},{x:326,y:186,id:10},{x:518,y:-88,id:10},{x:-317,y:12,id:11},{x:-254,y:-90,id:11},{x:150,y:-11,id:11},{x:162,y:293,id:11},{x:380,y:-290,id:11},{x:426,y:-74,id:11},{x:539,y:-323,id:11},{x:608,y:316,id:11},{x:664,y:171,id:11},{x:500,y:100,id:12,d:1e3,s:8},{x:-500,y:200,id:13,d:-1e3,s:8},{x:0,y:300,id:14,d:1e3,s:8}],e}var n;return r(e,t),n=e,e.prototype.getGameMode=function(){return this.gameMode},e.prototype.setGameMode=function(t){this.gameMode=t},e.prototype.getTimeNow=function(){return this.timeNow},e.prototype.getPlayerScore=function(){return this.clientPlayerScore},e.prototype.setPlayerScore=function(t){this.clientPlayerScore=t},e.prototype.getLevelScoreEarn=function(){return this.levelScoreEarn},e.prototype.setLevelScoreEarn=function(t){this.levelScoreEarn=t},e.prototype.getLevel=function(){return this.clientLevel},e.prototype.getLevelGoal=function(){return 0},e.prototype.getLevelTime=function(){return 60},e.prototype.getPlayerTnt=function(){return this.clientPlayerTnt},e.prototype.addPlayerTnt=function(){this.clientPlayerTnt+=1},e.prototype.descreasePlayerTnt=function(){this.clientPlayerTnt-=1},e.prototype.updatePlayerTnt=function(){this.playerArr[0].updateTnt(this.clientPlayerTnt)},e.prototype.getCanThrowTnt=function(){return this.canThrowTnt},e.prototype.setCanThrowTnt=function(t){this.canThrowTnt=t},e.prototype.getIsAddTnt=function(){return this.isAddTnt},e.prototype.setIsAddTnt=function(t){this.isAddTnt=t},e.prototype.getISU=function(){return this.isStrengthUp},e.prototype.setISU=function(t){this.isStrengthUp=t},e.prototype.getIRU=function(){return this.isRockUp},e.prototype.setIRU=function(t){this.isRockUp=t},e.prototype.getILU=function(){return this.isLuckUp},e.prototype.setILU=function(t){this.isLuckUp=t},e.prototype.getIDU=function(){return this.isDiamondUp},e.prototype.setIDU=function(t){this.isDiamondUp=t},e.prototype.onLoad=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return null===n.instance&&(n.instance=this),[4,v.DataManager.instance.loadAll()];case 1:return t.sent(),[4,this.i18n.init(p.default.data())];case 2:return t.sent(),[4,p.default.setLang(p.LanguageConfig.EN,function(){cc.log("set lang ",p.LanguageConfig.EN)})];case 3:return t.sent(),cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!0,[4,this.initGame()];case 4:return t.sent(),[2]}})})},e.prototype.initGame=function(){var t=this;this.scheduleOnce(function(){t.loadTitle()},.05),this.playToast.node.active=!1,this.shop.node.active=!1,this.getISU()&&g.default.instance.addBuff(g.BuffType.Strength,.5,10,this.getLevelTime()),this.getIRU()&&g.default.instance.addBuff(g.BuffType.RockValue,3,this.getLevelTime(),this.getLevelTime()),this.getILU()&&g.default.instance.addBuff(g.BuffType.Luck,2,this.getLevelTime(),this.getLevelTime()),this.getIDU()&&g.default.instance.addBuff(g.BuffType.DiamondValue,2,this.getLevelTime(),this.getLevelTime()),this.startTimer(this.getLevelTime()),this.createPlayer(),this.playerArr[0].updateTnt(this.getPlayerTnt()),this.createMap(),this.turnOnTouch(),this.arrValues[0].getComponent(cc.Label).string=this.getPlayerScore().toString(),this.arrValues[1].getComponent(cc.Label).string=this.getLevelGoal().toString(),this.arrValues[3].getComponent(cc.Label).string=this.getLevel().toString()},e.prototype.endGame=function(){this.unscheduleAllCallbacks(),this.stopAllPlayer(),this.turnOffTouch();var t=!1,e=this.getPlayerScore()+this.getLevelScoreEarn();e>=this.getLevelGoal()&&(t=!0,this.setPlayerScore(e)),this.playerArr[0].stopAll(),cc.log("End game! Win:",t),this.playToast.init(t),g.default.instance.resetBuffs(),g.default.instance.logBuffs(),this.setLevelScoreEarn(0),this.clearBuffs(),this.clearSkill(),this.unscheduleTimer()},e.prototype.turnOnTouch=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){t.playerArr[0].throwLine()})},e.prototype.turnOffTouch=function(){this.node.off(cc.Node.EventType.TOUCH_START)},e.prototype.createPlayer=function(){switch(this.gameMode){case s.SINGLE:this.playerArr[0].node.active=!0,this.playerArr[0].node.getComponent(cc.Widget).horizontalCenter=0,this.playerArr[0].init(0),this.playerArr[1].node.active=!1;break;case s.PVP:this.playerArr[0].node.active=!0,this.playerArr[0].node.getComponent(cc.Widget).horizontalCenter=-cc.view.getVisibleSize().width/10,this.playerArr[0].node.getComponent(cc.Widget).updateAlignment(),this.playerArr[0].init(0),this.playerArr[1].node.active=!0,this.playerArr[1].node.getComponent(cc.Widget).horizontalCenter=cc.view.getVisibleSize().width/10,this.playerArr[1].node.getComponent(cc.Widget).updateAlignment(),this.playerArr[1].init(0);break;default:cc.log("No Game Mode")}},e.prototype.createMap=function(){var t=this;this.itemSpace.removeAllChildren(),this.mapTest.forEach(function(e){var n=cc.instantiate(t.itemHookPrf);n.setPosition(e.x,e.y),n.getComponent(u.default).createItem(e.id,e.d,e.s),t.itemSpace.addChild(n)})},e.prototype.initSkill=function(t){this.btn_Skill.children[1].getComponent(cc.Label).string=t},e.prototype.onClickSkill=function(){this.playerArr[0].skillManager.tryCast(),this.playerArr[0].character.playAnim(2,.4)},e.prototype.turnOnCD=function(){this.btn_Skill.children[2].active=!0},e.prototype.createExplosion=function(t,e,n){void 0===n&&(n=!1);var o=cc.instantiate(this.explosionPrf);o.setPosition(t,e),this.itemSpace.addChild(o),o.getComponent(l.default).runExplode(n)},e.prototype.openShop=function(){this.shop.openShop()},e.prototype.closeShop=function(){this.shop.closeShop()},e.prototype.nextLevel=function(){this.clientLevel+=1,this.initGame(),cc.log("next level",this.clientLevel)},e.prototype.restartLevel=function(){cc.log("restart level"),this.initGame()},e.prototype.returnHome=function(){cc.log("return home")},e.prototype.onClickTnt=function(){var t=this;this.getPlayerTnt()>0&&this.getCanThrowTnt()?(this.playerArr[0].line.stopExpend(),this.setCanThrowTnt(!1),this.playerArr[0].character.playAnim(3,.5),this.scheduleOnce(function(){t.descreasePlayerTnt(),t.updatePlayerTnt(),t.playerArr[0].hook.explodeHook()},.5)):cc.error("No TNT or Can't throw now!")},e.prototype.loadTitle=function(){this.arrTitles.forEach(function(t){var e=t.getComponent(h.default).ID;p.default.setLabelData(t.getComponent(cc.Label),e)})},e.prototype.startTimer=function(t){this.arrValues[2].getComponent(cc.Label).string=t.toFixed(),this.timeNow=t,this.timeFunc=function(){this.timeNow--,this.arrValues[2].getComponent(cc.Label).string=this.timeNow.toString(),this.timeNow<=0&&this.endGame()},this.schedule(this.timeFunc,1,t-1)},e.prototype.unscheduleTimer=function(){this.unschedule(this.timeFunc)},e.prototype.addMoney=function(t){var e=this.getLevelScoreEarn()+t;this.setLevelScoreEarn(e);var n=this.getPlayerScore()+this.getLevelScoreEarn();cc.log("add money",t,n),this.arrValues[0].getComponent(cc.Label).string=n.toFixed()},e.prototype.stopAllPlayer=function(){this.playerArr.forEach(function(t){t.stopAll()})},e.prototype.calculatedTime=function(t,e){return Math.round(t/50*e)/10*g.default.instance.getMultiplier(g.BuffType.Strength,this.timeNow)},e.prototype.getMoneyPos=function(){return this.arrValues[0].convertToWorldSpaceAR(this.arrValues[0].getPosition())},e.prototype.clearBuffs=function(){this.setIDU(!1),this.setILU(!1),this.setIRU(!1),this.setISU(!1),cc.log("Clear all buffs",this.getIDU(),this.getILU(),this.getIRU(),this.getISU())},e.prototype.clearSkill=function(){for(var t=0;t<this.playerArr.length;t++)this.playerArr[t].skillManager.clearSkill()},e.prototype.powerReel=function(){cc.log("power reel activated!"),g.default.instance.addBuff(g.BuffType.Strength,.5,void 0,void 0,1)},e.instance=null,i([w(cc.Node)],e.prototype,"itemSpace",void 0),i([w(cc.Node)],e.prototype,"arrTitles",void 0),i([w(cc.Node)],e.prototype,"arrValues",void 0),i([w(cc.Node)],e.prototype,"btn_Skill",void 0),i([w(_.default)],e.prototype,"playerArr",void 0),i([w(d.default)],e.prototype,"shop",void 0),i([w(y.default)],e.prototype,"playToast",void 0),i([w(cc.Prefab)],e.prototype,"itemHookPrf",void 0),i([w(cc.Prefab)],e.prototype,"explosionPrf",void 0),n=i([b],e)}(cc.Component);n.default=O,cc._RF.pop()},{"../core/DataMgr":"DataMgr","../i18n/LabelLocalized":"LabelLocalized","../i18n/i18n":"i18n","../modules/buffs":"buffs","../modules/explosion":"explosion","../modules/itemHook":"itemHook","../modules/playToast":"playToast","../modules/player":"player","../modules/shop":"shop","../utils/LanguageManager":"LanguageManager"}],LabelLocalized:[function(t,e,n){"use strict";cc._RF.push(e,"ab45bTnEVNAR6qF68zv9+wO","LabelLocalized");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../utils/LanguageManager"),a=cc._decorator,s=a.ccclass,l=a.property,u=a.requireComponent,p=a.disallowMultiple,f=a.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.setDataInScript=!1,e.ID="",e}return r(e,t),e.prototype.onLoad=function(){c.default.setLang(c.LanguageConfig.EN,function(){cc.log("label localized")}),this._setFont(),this._setString()},e.prototype._setString=function(){""!==this.ID&&(this.setDataInScript||c.default.setLabelData(this.node.getComponent(cc.Label),this.ID))},e.prototype._setFont=function(){},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){},e.prototype.start=function(){},e.prototype.update=function(){},i([l(cc.Boolean)],e.prototype,"setDataInScript",void 0),i([l({visible:function(){return!1===this.setDataInScript}})],e.prototype,"ID",void 0),i([s,u(cc.Label),p,f("BPComp/LabelLocalized")],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../utils/LanguageManager":"LanguageManager"}],LanguageManager:[function(t,e,n){"use strict";var o;cc._RF.push(e,"341390PQ9BE5ph14EKxJwkg","LanguageManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.LanguageConfig=void 0;var r,i=t("../i18n/i18n.js");(function(t){t.ZH="zh",t.VI="vi",t.EN="en",t.KM="km"})(r=n.LanguageConfig||(n.LanguageConfig={})),(o={})[r.ZH]="fonts/GFont",o[r.KM]="fonts/GFont_km",o[r.VI]="fonts/GFont",o[r.EN]="fonts/GFont";var c=function(){function t(){}return t.clearData=function(){t.i18n=null},t.hasData=function(){return void 0!==t.i18n&&null!==t.i18n},Object.defineProperty(t,"config_sprite_lang",{get:function(){var e="config_sprite_lang";switch(t.lang()){case r.ZH:case r.KM:return e+"_"+t.lang();case r.VI:case r.EN:return e}},enumerable:!1,configurable:!0}),t.init=function(e){t._data=e,t.i18n=i,t.i18n.init(e),DonotDestroyManager.instance&&DonotDestroyManager.instance.i18n.init(e)},t.setConfigSpriteToLabel=function(e){t._configSpriteToLabel=e},t.setConfigUILabel=function(e){t._configUILabel=e},t.get=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(!t.i18n)return e;var r=t.i18n.t(e).toString();return n.forEach(function(t,e){r.includes("{"+e+"}")&&(r=r.replace("{"+e+"}",t))}),r.length>1?r.substring(0,1).toUpperCase()+r.substring(1,r.length):r.toUpperCase()},t.setLang=function(e,n){cc.sys.localStorage.setItem("user-lang",e),cc.resources.load("i18n/"+e,cc.JsonAsset,function(e,o){if(e)return cc.warn(e),void t.setLang(r.EN,n);t.init(o.json),n&&n()})},t.setLangSync=function(e){return new Promise(function(n){t.setLang(e,n)})},t.lang=function(){var t=cc.sys.localStorage.getItem("user-lang");return t||(t=r.EN,cc.sys.localStorage.setItem("user-lang",t)),t},t.langConfigResFolder=function(){switch(t.lang()){case r.KM:case r.ZH:return"lang_"+t.lang()+"_res/";case r.EN:case r.VI:default:return""}},t.data=function(){return t._data},t.setLabelData=function(e,n){if(n){cc.log(t.get(n.toString())),e.string=t.get(n.toString());var o=t._configUILabel[n];if(o){e.node.color.set(cc.Color.fromHEX(new cc.Color,o.color));var r=e.node.getComponent(cc.LabelOutline);r||(r=e.node.addComponent(cc.LabelOutline)),r.color=cc.Color.fromHEX(new cc.Color,o.outline_color),r.width=o.outline_width,o.font_size&&(e.fontSize=o.font_size/e.node.scale,e.lineHeight=e.fontSize)}}},t.getKeyLabelByPath=function(e){var n=null;for(var o in t._configSpriteToLabel)if("length"!==o&&"data_no_use"!==o){var r=t._configSpriteToLabel[o];r.startsWith("resources/")?(r=r.replace("resources/",t.langConfigResFolder()))===e&&(n=o):r.startsWith("image/")?(r=r.replace("image/",t.langConfigResFolder()+"image"))===e&&(n=o):r.startsWith("res/")&&(r=r.replace("res/","res/"+t.langConfigResFolder()))===e&&(n=o)}return cc.log("get key label by path sprite:",e,", response:",n),n},t.setLabelBySpritePath=function(e,n){t.setLabelData(n,t.getKeyLabelByPath(e))},t.i18n=null,t._data={},t._configSpriteToLabel={},t._configUILabel={},t}();n.default=c,globalThis.LanguageManager=c,cc._RF.pop()},{"../i18n/i18n.js":"i18n"}],MyEventDispatcher:[function(t,e,n){"use strict";cc._RF.push(e,"81011mEx45LFaMs8rsXNssm","MyEventDispatcher"),Object.defineProperty(n,"__esModule",{value:!0}),n.MyEventDispatcher=void 0;var o=function(){function t(){this._listenerMap=new Object}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.addListener=function(t,e,n){if(e&&t){var o=this._listenerMap[t];o||(o=this._listenerMap[t]=new Array);for(var r=0;r<o.length;r++)if(o[r]==e)return;o.push([e,n])}},t.prototype.removeListener=function(t,e){if(e&&t){var n=this._listenerMap[t];if(n)for(var o=0;o<n.length;o++){var r=n[o];if(r[0]==e){r.length=0,n.splice(o,1);break}}}},t.prototype.removeEvent=function(t){var e=this._listenerMap[t];e&&(delete this._listenerMap[t],e=[])},t.prototype.dispatchEvent=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(this._listenerMap[t])for(var o=this._listenerMap[t],r=0;r<o.length;r++)o[r][0].apply(o[r][1],e)},t}();n.MyEventDispatcher=o,cc._RF.pop()},{}],RichTextLocalized:[function(t,e,n){"use strict";cc._RF.push(e,"f20f1wj8+9HQrEisrGJxQLM","RichTextLocalized");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../script/util/LanguageManager"),a=cc._decorator,s=a.ccclass,l=a.requireComponent,u=a.property,p=a.disallowMultiple,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ID="",e}return r(e,t),e.prototype.onEnable=function(){""!==this.ID&&(this.node.getComponent(cc.RichText).string=c.default.get(this.ID))},e.prototype.onDisable=function(){},e.prototype.start=function(){},i([u()],e.prototype,"ID",void 0),i([s,l(cc.RichText),p],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../script/util/LanguageManager":void 0}],SoundUtil:[function(t,e,n){"use strict";cc._RF.push(e,"4cdf8yI94FKFZukJ02XLER6","SoundUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.SoundUtil=void 0;var o=function(){function t(){}return t.playMusic=function(t){cc.resources.load(t,cc.AudioClip,function(t,e){cc.audioEngine.playMusic(e,!0)})},t.playEffect=function(t){cc.resources.load(t,cc.AudioClip,function(t,e){cc.audioEngine.playEffect(e,!1)})},t.playClick=function(){t.playEffect("sound/dianji")},t.playBtnCloseEffect=function(){t.playEffect("sound/UI_qh")},t.playGainGoods=function(){t.playEffect("sound/getitem")},t.playGainGoodsEffectNew=function(){t.playEffect("sound/sound_getitem")},t.playSkillSFX=function(e,n,o){if(null==e||""==e)return!1;var r=cc.js.formatStr(t.Skill_SFX_Path,e);return t.play(r,!1,n,o)},t.play=function(t,e,n,o){cc.resources.load(t,cc.AudioClip,function(t,r){var i=cc.audioEngine.playEffect(r,e);o(i),null!=n&&cc.audioEngine.setFinishCallback(i,function(){n()})})},t.UI_SFX_Path="resources/sounds/ui/%s",t.Skill_SFX_Path="resources/sounds/skill/%s",t.BG_Music_Path="resources/sounds/%s",t.CV_SFX_Path="resources/sounds/cv/%s",t}();n.SoundUtil=o,cc._RF.pop()},{}],Timer:[function(t,e,n){"use strict";cc._RF.push(e,"02adcwqUwZNNLUQ1jRmhx+B","Timer"),Object.defineProperty(n,"__esModule",{value:!0}),n.Timer=void 0;var o=function(){function t(){}return t.setTimeout=function(t,e){setTimeout(function(){t()},e)},t}();n.Timer=o,cc._RF.pop()},{}],buffs:[function(t,e,n){"use strict";cc._RF.push(e,"53fcc659EZCUKPji7KuoMVj","buffs");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.BuffType=void 0;var c=t("../core/GamePlayCtrl"),a=cc._decorator,s=a.ccclass;a.property,function(t){t.Strength="strength",t.GoldValue="goldValue",t.DiamondValue="diamondValue",t.RockValue="rockValue",t.Luck="luck"}(n.BuffType||(n.BuffType={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buffs=[],e}var n;return r(e,t),n=e,e.prototype.onLoad=function(){null===n.instance&&(n.instance=this)},e.prototype.addBuff=function(t,e,n,o,r){var i={type:t,multiplier:e};n&&void 0!==o&&(i.duration=n,i.expiresAt=o-n),void 0!==r&&(i.usesLeft=r),this.buffs.push(i),cc.log("[BuffManager] Add buff:",i)},e.prototype.filterBuff=function(t){this.buffs=this.buffs.filter(function(e){return!(void 0!==e.expiresAt&&e.expiresAt>t||void 0!==e.usesLeft&&e.usesLeft<=0)})},e.prototype.getMultiplier=function(t,e){this.filterBuff(e);var n=1;return this.buffs.forEach(function(e){e.type===t&&(n*=e.multiplier)}),n},e.prototype.consumeUse=function(t){this.buffs.forEach(function(e){e.type===t&&void 0!==e.usesLeft&&(e.usesLeft-=1)})},e.prototype.checkConsumeBuff=function(t){this.filterBuff(c.default.instance.getTimeNow());var e=!1;return this.buffs.forEach(function(n){n.type===t&&void 0!==n.usesLeft&&(e=!0)}),e},e.prototype.resetBuffs=function(){this.buffs=[],cc.log("[BuffManager] Reset all buffs")},e.prototype.logBuffs=function(){cc.log("[BuffManager] Active buffs:",this.buffs)},e.instance=null,n=i([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../core/GamePlayCtrl":"GamePlayCtrl"}],character:[function(t,e,n){"use strict";cc._RF.push(e,"c1077AKAKlDOowmgWvT/Uck","character");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minerDown=[],e.minerStr=[],e.minerThrow=[],e.minerUp=[],e}return r(e,t),e.prototype.playAnim=function(t,e){this.unScheduleAll();var n=[],o=0,r=0;switch(t){case 0:n=this.minerDown,r=.2;break;case 1:n=this.minerUp,r=.1;break;case 2:n=this.minerStr,r=.2;break;case 3:n=this.minerThrow,r=.1}this.s1=function(){this.updateSF(n[o]),++o===n.length&&(o=0)},this.schedule(this.s1,r,Math.round(e/r-1)),this.s2=function(){this.updateSF(this.minerDown[0])},this.scheduleOnce(this.s2,e+.2)},e.prototype.updateSF=function(t){this.node.getComponent(cc.Sprite).spriteFrame=t},e.prototype.unScheduleAll=function(){this.unschedule(this.s1),this.unschedule(this.s2)},e.prototype.resetCharacter=function(){this.updateSF(this.minerDown[0])},e.instance=null,i([s(cc.SpriteFrame)],e.prototype,"minerDown",void 0),i([s(cc.SpriteFrame)],e.prototype,"minerStr",void 0),i([s(cc.SpriteFrame)],e.prototype,"minerThrow",void 0),i([s(cc.SpriteFrame)],e.prototype,"minerUp",void 0),i([a],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],explosion:[function(t,e,n){"use strict";cc._RF.push(e,"8c463aSuPlL35JMu7oC7PFo","explosion");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../utils/Constants"),a=t("./itemHook"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrSF=[],e.animTime=.05,e}return r(e,t),e.prototype.runExplode=function(t){void 0===t&&(t=!1);var e=this,n=0;t&&(this.node.getComponent(cc.CircleCollider).enabled=!1),this.updateSF(n,t),this.schedule(function(){n++,e.updateSF(n,t),9===n&&e.deleteNode()},this.animTime,8)},e.prototype.updateSF=function(t,e){void 0===e&&(e=!1),this.node.getComponent(cc.Sprite).spriteFrame=this.arrSF[t];var n=this.arrSF[t].getOriginalSize();e?(this.node.width=n.width*c.uniScale*2,this.node.height=n.height*c.uniScale*2):(this.node.width=n.width*c.uniScale*c.explosionRadius,this.node.height=n.height*c.uniScale*c.explosionRadius),this.node.getComponent(cc.CircleCollider).radius=(this.node.width+this.node.height)/4},e.prototype.deleteNode=function(){var t=this;this.scheduleOnce(function(){t.node.removeFromParent(!0)},this.animTime)},e.prototype.onCollisionEnter=function(t,e){cc.log("collision",t,e);var n=t.node.getComponent(a.default);if(n)switch(n.statsInfo.id){case 12:case 13:case 14:n.stopMovement(),n.createItem(11);break;default:t.node.removeFromParent(!0)}},i([u(cc.SpriteFrame)],e.prototype,"arrSF",void 0),i([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../utils/Constants":"Constants","./itemHook":"itemHook"}],hook:[function(t,e,n){"use strict";cc._RF.push(e,"a6c35PQbUFFVIxzt2EOkZLV","hook");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../core/GamePlayCtrl"),a=t("../utils/Constants"),s=t("./buffs"),l=t("./itemHook"),u=t("./line"),p=t("./player"),f=cc._decorator,h=f.ccclass,d=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrSF=[],e.arrCollision=[],e.isCatch=!1,e}return r(e,t),e.prototype.onCollisionEnter=function(t,e){cc.log("collision",t,e),this.isCatch=!0,this.turnOffCollision();var n=this.node.parent.getComponent(u.default);if(n.stopExpend(),this.arrCollision.push(t),cc.error(this.arrCollision),this.isCatch){var o=this.node.height,r=t.node.getComponent(l.default);if(r){var i=r.statsInfo.id,a=r.statsInfo.v,p=r.statsInfo.m;switch(i){case 0:case 1:case 2:a*=s.default.instance.getMultiplier(s.BuffType.RockValue,c.default.instance.getTimeNow());break;case 6:case 7:a*=s.default.instance.getMultiplier(s.BuffType.DiamondValue,c.default.instance.getTimeNow());break;case 8:0===a&&c.default.instance.setIsAddTnt(!0);break;case 9:var f=r.node.getPosition();c.default.instance.createExplosion(f.x,f.y);break;case 12:this.node.scaleX=r.node.scaleX;break;case 13:case 14:this.node.scaleX=r.node.scaleX,a*=s.default.instance.getMultiplier(s.BuffType.DiamondValue,c.default.instance.getTimeNow())}this.updateSpriteFrame(i),t.node.removeFromParent(!0),n.retract(o,p,a),c.default.instance.setCanThrowTnt(!0)}else n.retract(o,1,0),cc.log("No item found!")}},e.prototype.updateSpriteFrame=function(t){cc.log(t),this.node.getComponent(cc.Sprite).spriteFrame=this.arrSF[t];var e=this.arrSF[t].getOriginalSize();this.node.width=e.width*a.uniScale,this.node.height=e.height*a.uniScale,this.node.getComponent(cc.Widget).bottom=6-this.node.height},e.prototype.resetHook=function(){this.updateSpriteFrame(15),this.node.scaleX=1,this.isCatch=!1},e.prototype.turnOnCollision=function(){this.node.getComponent(cc.BoxCollider).enabled=!0},e.prototype.turnOffCollision=function(){this.node.getComponent(cc.BoxCollider).enabled=!1},e.prototype.getLength=function(){return this.node.height},e.prototype.explodeHook=function(){var t=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),e=c.default.instance.itemSpace.convertToNodeSpaceAR(t);c.default.instance.createExplosion(e.x,e.y,!0),this.resetHook(),this.node.parent.parent.getComponent(p.default).line.retract(this.node.height,.5,0)},i([d(cc.SpriteFrame)],e.prototype,"arrSF",void 0),i([h],e)}(cc.Component);n.default=y,cc._RF.pop()},{"../core/GamePlayCtrl":"GamePlayCtrl","../utils/Constants":"Constants","./buffs":"buffs","./itemHook":"itemHook","./line":"line","./player":"player"}],i18n:[function(t,e){"use strict";cc._RF.push(e,"2a8d4NrglVEopWwBK5ilzTf","i18n");var n=new(t("polyglot"))({allowMissing:!0});e.exports={init:function(t){n.replace(t)},t:function(t,e){if(null==t||null==t)return"";var o=n.t(t,e);if(cc.sys.isBrowser){var r=1,i="\t";cc.sys.os!=cc.sys.OS_WINDOWS&&(r=2,i="\t\t");for(var c=0;c>-1;)c++,(c=o.indexOf("\t",c))>-1&&(o=o.substring(0,c)+i+o.substring(c,o.length),c+=r)}return o}},cc._RF.pop()},{polyglot:"polyglot"}],itemBuy:[function(t,e,n){"use strict";cc._RF.push(e,"b8a2bpR30lK24h5AqVxc6Q3","itemBuy");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return r(e,t),e.prototype.start=function(){},i([s(cc.Label)],e.prototype,"label",void 0),i([s],e.prototype,"text",void 0),i([a],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],itemHook:[function(t,e,n){"use strict";cc._RF.push(e,"185fbvxvyVIIZDllxINCSRC","itemHook");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../core/DataMgr"),a=t("../core/GamePlayCtrl"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrSF=[],e}return r(e,t),Object.defineProperty(e.prototype,"statsInfo",{get:function(){return this.stats},enumerable:!1,configurable:!0}),e.prototype.createItem=function(t,e,n){if(this.stats=c.DataManager.instance.getObjectById(t),cc.log("CREATE ITEM:",this.stats),8===t){var o;o=a.default.instance.getILU()?[3,4,5,6,7,13,14]:[0,1,2,3,4,5,6,7,9,10,11,12,13,14];var r=Math.floor(Math.random()*(o.length-1));cc.log("RANDOM BAG:",o[r]),9===o[r]?(this.stats.v=0,this.stats.m=c.DataManager.instance.getObjectById(o[r]).m):(this.stats.m=c.DataManager.instance.getObjectById(o[r]).m,this.stats.v=c.DataManager.instance.getObjectById(o[r]).v)}this.getSpriteFrame(this.stats.id),e&&n&&this.creatMovement(e,n)},e.prototype.getSpriteFrame=function(t){var e=this.node.getChildByName("sprite");e.getComponent(cc.Sprite).spriteFrame=this.arrSF[t],e.width=this.stats.w,e.height=this.stats.h,this.node.getComponent(cc.CircleCollider).radius=(e.width+e.height)/4.5},e.prototype.creatMovement=function(t,e){var n=this;this.node.scaleX=t>0?1:-1,cc.tween(this.node).repeatForever(cc.tween().by(e,{position:cc.v3(-t,0,0)}).call(function(){n.changeScaleX()}).by(e,{position:cc.v3(t,0,0)}).call(function(){n.changeScaleX()})).start()},e.prototype.stopMovement=function(){cc.Tween.stopAllByTarget(this.node)},e.prototype.changeScaleX=function(){this.node.scaleX=-this.node.scaleX},i([u(cc.SpriteFrame)],e.prototype,"arrSF",void 0),i([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../core/DataMgr":"DataMgr","../core/GamePlayCtrl":"GamePlayCtrl"}],line:[function(t,e,n){"use strict";cc._RF.push(e,"ecb8a3O33VAtqtHG7P7nlAU","line");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../core/GamePlayCtrl"),a=t("../utils/Constants"),s=t("./buffs"),l=t("./moneyFly"),u=t("./player"),p=cc._decorator,f=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moneyFlyPrf=null,e.rotationTime=2,e}return r(e,t),e.prototype.init=function(){this.resetLine(),this.rotationDirection=1,this.isRotating=!1,this.startRotationAnimation()},e.prototype.calculateRotationTime=function(t){var e=this.node.angle,n=Math.abs(t-e)/150*this.rotationTime;return Math.max(.1,n)},e.prototype.startRotationAnimation=function(){var t=this;if(!this.isRotating){this.stopRotation(),this.isRotating=!0;var e=this.getTargetAngle(),n=this.calculateRotationTime(e);cc.tween(this.node).tag(999).to(n,{angle:e},{easing:"sineInOut"}).call(function(){t.changeDirection(),cc.tween(t.node).repeatForever(cc.tween().tag(999).to(2,{angle:-e},{easing:"sineInOut"}).call(function(){t.changeDirection()}).to(2,{angle:e},{easing:"sineInOut"}).call(function(){t.changeDirection()})).start()}).start()}},e.prototype.getTargetAngle=function(){return 1===this.rotationDirection?75:-75},e.prototype.changeDirection=function(){this.rotationDirection=-this.rotationDirection},e.prototype.getRotationStatus=function(){return{isRotating:this.isRotating,currentAngle:this.node.angle,nextDirection:this.rotationDirection,nextTarget:1===this.rotationDirection?75:-75}},e.prototype.stopAll=function(){this.stopRotation(),this.stopExpend()},e.prototype.stopRotation=function(){cc.Tween.stopAllByTarget(this.node),this.isRotating=!1},e.prototype.stopExpend=function(){cc.Tween.stopAllByTarget(this.node)},e.prototype.expend=function(){var t=this;if(!this.isLineThrow){this.isLineThrow=!0,this.stopRotation();var e=this.distFromRopeEndToScreenEdge(),n=this.node.parent.getComponent(u.default).hook.getLength();cc.error("dist:",e+n);var o=c.default.instance.calculatedTime(e+n,.5);cc.log("expend time",o),this.node.parent.getComponent(u.default).hook.turnOnCollision(),this.node.parent.getComponent(u.default).character.playAnim(a.characterAnims.MINER_DOWN,o),cc.tween(this.node).tag(998).to(o,{height:e}).call(function(){t.node.parent.getComponent(u.default).hook.turnOffCollision(),t.retract(n,.5,0)}).start()}},e.prototype.retract=function(t,e,n){var o=this,r=this.getLineLength()+t,i=c.default.instance.calculatedTime(r,e);cc.log("pull time",i),this.node.parent.getComponent(u.default).character.playAnim(a.characterAnims.MINER_UP,i),cc.tween(this.node).tag(998).to(i,{height:this.node.getComponent(cc.Sprite).spriteFrame.getOriginalSize().height*a.uniScale}).call(function(){var t=0;cc.log("is add tnt:",c.default.instance.getIsAddTnt()),c.default.instance.getIsAddTnt()&&(o.node.parent.getComponent(u.default).animAddTnt(),c.default.instance.setIsAddTnt(!1),t=.75),o.scheduleOnce(function(){o.node.parent.getComponent(u.default).hook.resetHook(),o.updateScore(n),o.endLineThrow(),s.default.instance.checkConsumeBuff(s.BuffType.Strength)&&s.default.instance.consumeUse(s.BuffType.Strength)},t)}).start()},e.prototype.updateScore=function(t){if(!(t<=0)){var e=cc.instantiate(this.moneyFlyPrf);this.node.parent.addChild(e);var n=c.default.instance.getMoneyPos();e.getComponent(l.default).startFly(t,this.getLineLength(),cc.v3(n.x,n.y,0))}},e.prototype.endLineThrow=function(){c.default.instance.setCanThrowTnt(!1),this.startRotationAnimation(),this.scheduleOnce(function(){this.isLineThrow=!1},.2)},e.prototype.distFromRopeEndToScreenEdge=function(){var t=this.node.parent.convertToWorldSpaceAR(this.node.position),e=-(this.node.angle-90)*Math.PI/180,n=cc.view.getVisibleSize(),o=n.width,r=n.height,i=this.node.height,c=Math.cos(e),a=-Math.sin(e),s=t.x+i*c,l=t.y+i*a,u=Number.POSITIVE_INFINITY,p=c>0?(o-s)/c:c<0?(0-s)/c:u,f=a>0?(r-l)/a:a<0?(0-l)/a:u,h=u;return p>=0&&(h=Math.min(h,p)),f>=0&&(h=Math.min(h,f)),isFinite(h)?h+this.node.height:null},e.prototype.getLineLength=function(){return this.node.height},e.prototype.resetLine=function(){this.stopAll(),this.node.height=this.node.getComponent(cc.Sprite).spriteFrame.getOriginalSize().height*a.uniScale,this.startRotationAnimation(),this.isLineThrow=!1},i([h(cc.Prefab)],e.prototype,"moneyFlyPrf",void 0),i([f],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../core/GamePlayCtrl":"GamePlayCtrl","../utils/Constants":"Constants","./buffs":"buffs","./moneyFly":"moneyFly","./player":"player"}],moneyFly:[function(t,e,n){"use strict";cc._RF.push(e,"1335c5CdJVJnbJ0oQqY1u7C","moneyFly");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../core/GamePlayCtrl"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}return r(e,t),e.prototype.startFly=function(t,e,n){var o=this;this.label.string=t.toFixed(),this.node.setPosition(0,-e),this.node.scale=0;var r=this.node.parent.convertToNodeSpaceAR(n),i=cc.Vec3.lerp(new cc.Vec3,this.node.position,r,.75);cc.tween(this.node).by(.25,{position:i,scale:1}).call(function(){o.scheduleOnce(function(){cc.tween(o.node).to(.25,{position:r,scale:0}).call(function(){c.default.instance.addMoney(t),o.node.removeFromParent(!0)}).start()},.5)}).start()},i([l(cc.Label)],e.prototype,"label",void 0),i([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../core/GamePlayCtrl":"GamePlayCtrl"}],playToast:[function(t,e,n){"use strict";cc._RF.push(e,"e76ae1fx6tJvJxD9rDBK5Av","playToast");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../core/GamePlayCtrl"),a=t("../utils/LanguageManager"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.btn=[],e}return r(e,t),e.prototype.init=function(t){this.node.active=!0,t?(this.label.string=a.default.get("toast_win"),this.btn[0].node.active=!0,this.btn[1].node.active=!1,this.btn[2].node.active=!0,this.btn[3].node.active=!1):(this.label.string=a.default.get("toast_lose"),this.btn[0].node.active=!1,this.btn[1].node.active=!0,this.btn[2].node.active=!1,this.btn[3].node.active=!0)},e.prototype.onClickOpenShop=function(){c.default.instance.openShop(),this.node.active=!1},e.prototype.onClickNextLevel=function(){c.default.instance.nextLevel(),this.node.active=!1},e.prototype.onClickRestartLevel=function(){c.default.instance.restartLevel(),this.node.active=!1},e.prototype.onClickReturnHome=function(){c.default.instance.returnHome(),this.node.active=!1},i([u(cc.Label)],e.prototype,"label",void 0),i([u(cc.Button)],e.prototype,"btn",void 0),i([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../core/GamePlayCtrl":"GamePlayCtrl","../utils/LanguageManager":"LanguageManager"}],player:[function(t,e,n){"use strict";cc._RF.push(e,"12844Lg8EVLMLwTzjtWTZql","player");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../core/GamePlayCtrl"),a=t("../skills/skillMgr"),s=t("../skills/skillPowerReel"),l=t("./character"),u=t("./hook"),p=t("./line"),f=cc._decorator,h=f.ccclass,d=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.character=null,e.line=null,e.hook=null,e.numTnt=null,e.addTnt=null,e.skillManager=null,e.collectedCount=0,e}var n;return r(e,t),n=e,e.prototype.init=function(t){void 0===t&&(t=0),this.initCharacter(t),this.initSkill(t,c.default.instance.getTimeNow()),this.line.init(),this.hook.resetHook()},e.prototype.initCharacter=function(t){switch(t){case 0:case 1:break;default:cc.error("Invalid character id:",t)}},e.prototype.initSkill=function(t,e){switch(t){case 0:this.skillManager.addSkill(new s.default,this.node.getComponent(n),e)}},e.prototype.onCollectItem=function(){this.collectedCount++},e.prototype.throwLine=function(){this.line.expend()},e.prototype.updateTnt=function(t){this.numTnt.string=t.toFixed()},e.prototype.animAddTnt=function(){var t=this;this.addTnt.active=!0,this.addTnt.position=cc.v3(-180,0),this.addTnt.scale=1,cc.tween(this.addTnt).delay(.5).to(.25,{scale:0,position:cc.v3(this.numTnt.node.parent.position.x,this.numTnt.node.parent.position.y)}).call(function(){t.addTnt.active=!1,c.default.instance.addPlayerTnt(),c.default.instance.updatePlayerTnt()}).start()},e.prototype.reset=function(){this.character.resetCharacter(),this.line.resetLine(),this.hook.resetHook()},e.prototype.stopAll=function(){this.line.stopAll()},i([d(l.default)],e.prototype,"character",void 0),i([d(p.default)],e.prototype,"line",void 0),i([d(u.default)],e.prototype,"hook",void 0),i([d(cc.Label)],e.prototype,"numTnt",void 0),i([d(cc.Node)],e.prototype,"addTnt",void 0),i([d(a.default)],e.prototype,"skillManager",void 0),n=i([h],e)}(cc.Component);n.default=y,cc._RF.pop()},{"../core/GamePlayCtrl":"GamePlayCtrl","../skills/skillMgr":"skillMgr","../skills/skillPowerReel":"skillPowerReel","./character":"character","./hook":"hook","./line":"line"}],polyglot:[function(t,e,n){(function(t){"use strict";cc._RF.push(e,"f73bb6+GehJ/5f5ygOA3vxS","polyglot"),function(t,o){"function"==typeof define&&define.amd?define([],function(){return o(t)}):"object"==typeof n?e.exports=o(t):t.Polyglot=o(t)}(void 0!==t?t:void 0,function(t){var e=String.prototype.replace;function n(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||h}n.VERSION="1.0.0",n.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},n.prototype.extend=function(t,e){var n;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],e&&(o=e+"."+o),"object"==typeof n?this.extend(n,o):this.phrases[o]=n)},n.prototype.unset=function(t,e){var n;if("string"==typeof t)delete this.phrases[t];else for(var o in t)t.hasOwnProperty(o)&&(n=t[o],e&&(o=e+"."+o),"object"==typeof n?this.unset(n,o):delete this.phrases[o])},n.prototype.clear=function(){this.phrases={}},n.prototype.replace=function(t){this.clear(),this.extend(t)},n.prototype.t=function(t,n){var r,i,c,s,u,p,h,y,g;return"number"==typeof(n=null==n?{}:n)&&(n={smart_count:n}),"string"==typeof this.phrases[t]?r=this.phrases[t]:"string"==typeof n._?r=n._:this.allowMissing?r=t:(this.warn('Missing translation for key: "'+t+'"'),i=t),"string"==typeof r&&(n=d(n),i=f((c=r,s=this.currentLocale,null!=(u=n.smart_count)&&c?(y=(h=c.split(o))[l(s,u)]||h[0],g=y,p=e.call(g,a,"")):p=c,i=p),n)),i},n.prototype.has=function(t){return t in this.phrases};var o="||||",r={chinese:function(){return 0},german:function(t){return 1!==t?1:0},french:function(t){return t>1?1:0},russian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},i={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs","sk"],polish:["pl"],icelandic:["is"]};function c(t){var e,n,o,r={};for(e in t)if(t.hasOwnProperty(e))for(o in n=t[e])r[n[o]]=e;return r}var a=/^\s+|\s+$/g;function s(t){var e=c(i);return e[t]||e.en}function l(t,e){return r[s(t)](e)}var u=/\$/g,p="$$$$";function f(t,n){for(var o in n)if("_"!==o&&n.hasOwnProperty(o)){var r=n[o];"string"==typeof r&&(r=e.call(n[o],u,p)),t=e.call(t,new RegExp("%\\{"+o+"\\}","g"),r)}return t}function h(e){t.console&&t.console.warn&&t.console.warn("WARNING: "+e)}function d(t){var e={};for(var n in t)e[n]=t[n];return e}return n}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],shop:[function(t,e,n){"use strict";cc._RF.push(e,"8682fKaVbFMwbVe1Fe12M1c","shop");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../core/GamePlayCtrl"),a=t("../utils/LanguageManager"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.next=null,e.itemSpace=null,e.itemDescript=null,e.idNow="",e}return r(e,t),e.prototype.onLoad=function(){for(var t=this,e=function(e){n.itemSpace.children[e].on(cc.Node.EventType.TOUCH_END,function(n){t.onTouch(n,e.toFixed())},n)},n=this,o=0;o<this.itemSpace.children.length;o++)e(o)},e.prototype.nextLevel=function(){this.closeShop(),c.default.instance.nextLevel()},e.prototype.buyItem=function(){if(""!==this.idNow)switch(this.itemSpace.children[parseInt(this.idNow)].active=!1,this.idNow){case"0":c.default.instance.setISU(!0);break;case"3":c.default.instance.addPlayerTnt();break;case"4":c.default.instance.setIRU(!0);break;case"5":c.default.instance.setILU(!0);break;case"6":c.default.instance.setIDU(!0);break;default:cc.log("Not an Item!")}},e.prototype.onTouch=function(t,e){this.idNow=e,a.default.setLabelData(this.itemDescript,"shop_"+e)},e.prototype.openShop=function(){this.node.active=!0,this.itemSpace.children.forEach(function(t){t.active=!0}),this.idNow="",this.itemDescript.string=""},e.prototype.closeShop=function(){this.node.active=!1},i([u(cc.Node)],e.prototype,"next",void 0),i([u(cc.Node)],e.prototype,"itemSpace",void 0),i([u(cc.Label)],e.prototype,"itemDescript",void 0),i([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../core/GamePlayCtrl":"GamePlayCtrl","../utils/LanguageManager":"LanguageManager"}],skillMgr:[function(t,e,n){"use strict";cc._RF.push(e,"5cd81gJwGpHMJQq9MmEbHkx","skillMgr");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../core/GamePlayCtrl"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skillSF=[],e.skills=[],e}return r(e,t),e.prototype.addSkill=function(t,e,n){t.setOwner(e),this.skills.push(t),cc.log(n,t.cooldown),t.updateLastCastTime(n+t.cooldown)},e.prototype.clearSkill=function(){this.skills=[]},e.prototype.updateSkillCooldown=function(t){var e=t.cooldown;c.default.instance.initSkill(e.toFixed()),this.schedule(function(){0==(e-=1)?c.default.instance.initSkill(t.name):c.default.instance.initSkill(e.toFixed())},1,t.cooldown-1)},e.prototype.tryCast=function(){var t=this.skills[0];cc.log("can cast:",t,t.canCast(),t.conditionMet()),t&&t.canCast()&&t.conditionMet()?(t.cast(),this.updateSkillCooldown(t)):cc.log("skill on cooldown!")},i([l(cc.SpriteFrame)],e.prototype,"skillSF",void 0),i([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../core/GamePlayCtrl":"GamePlayCtrl"}],skillPowerReel:[function(t,e,n){"use strict";cc._RF.push(e,"039d72/DwBC0L0Iw8vkUfZU","skillPowerReel");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../core/GamePlayCtrl"),a=t("./skill"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){return t.call(this,"Power Reel",8)||this}return r(e,t),e.prototype.conditionMet=function(){return this.owner&&this.owner.collectedCount>=0},e.prototype.cast=function(){this.lastCastTime=c.default.instance.getTimeNow(),c.default.instance.powerReel()},i([l],e)}(a.default));n.default=u,cc._RF.pop()},{"../core/GamePlayCtrl":"GamePlayCtrl","./skill":"skill"}],skill:[function(t,e,n){"use strict";cc._RF.push(e,"8ed72cPWm5JHJ/e/nAd+hm3","skill");var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../core/GamePlayCtrl"),i=cc._decorator,c=i.ccclass,a=(i.property,function(){function t(t,e){this.lastCastTime=-999,this.owner=null,this.name=t,this.cooldown=e,r.default.instance.initSkill(t)}return t.prototype.setOwner=function(t){this.owner=t},t.prototype.canCast=function(){var t=r.default.instance.getTimeNow();return cc.log(this.lastCastTime-t,this.cooldown),this.lastCastTime-t>=this.cooldown},t.prototype.updateLastCastTime=function(t){this.lastCastTime=t},o([c],t)}());n.default=a,cc._RF.pop()},{"../core/GamePlayCtrl":"GamePlayCtrl"}],xxtea:[function(t,e){"use strict";cc._RF.push(e,"b0145eIv9BBipZvlGfuAR2T","xxtea"),function(){function t(){this.delta=2654435769}t.getInstance=function(){return t.instance||(t.instance=new t,t.instance.initInstance()),this.instance},t.prototype.initInstance=function(){},t.prototype.toUint8Array=function(t,e){var n=t.length,o=n<<2;if(e){var r=t[n-1];if(r<(o-=4)-3||r>o)return null;o=r}for(var i=new Uint8Array(o),c=0;c<o;++c)i[c]=t[c>>2]>>((3&c)<<3);return i},t.prototype.toUint32Array=function(t,e){var n,o=t.length,r=o>>2;0!=(3&o)&&++r,e?(n=new Uint32Array(r+1))[r]=o:n=new Uint32Array(r);for(var i=0;i<o;++i)n[i>>2]|=t[i]<<((3&i)<<3);return n},t.prototype.mx=function(t,e,n,o,r,i){return(n>>>5^e<<2)+(e>>>3^n<<4)^(t^e)+(i[3&o^r]^n)},t.prototype.fixk=function(t){if(t.length<16){var e=new Uint8Array(16);e.set(t),t=e}return t},t.prototype.encryptUint32Array=function(t,e){var n,o,r,i,c,a,s=t.length,l=s-1;for(o=t[l],r=0,a=0|Math.floor(6+52/s);a>0;--a){for(i=(r+=this.delta)>>>2&3,c=0;c<l;++c)n=t[c+1],o=t[c]+=this.mx(r,n,o,c,i,e);n=t[0],o=t[l]+=this.mx(r,n,o,c,i,e)}return t},t.prototype.decryptUint32Array=function(t,e){var n,o,r,i,c,a=t.length,s=a-1;for(n=t[0],r=Math.floor(6+52/a)*this.delta;0!==r;r-=this.delta){for(i=r>>>2&3,c=s;c>0;--c)o=t[c-1],n=t[c]-=this.mx(r,n,o,c,i,e);o=t[s],n=t[0]-=this.mx(r,n,o,c,i,e)}return t},t.prototype.toBytes=function(t){for(var e=t.length,n=new Uint8Array(3*e),o=0,r=0;r<e;r++){var i=t.charCodeAt(r);if(i<128)n[o++]=i;else if(i<2048)n[o++]=192|i>>6,n[o++]=128|63&i;else{if(!(i<55296||i>57343)){if(r+1<e){var c=t.charCodeAt(r+1);if(i<56320&&56320<=c&&c<=57343){var a=65536+((1023&i)<<10|1023&c);n[o++]=240|a>>18,n[o++]=128|a>>12&63,n[o++]=128|a>>6&63,n[o++]=128|63&a,r++;continue}}throw new Error("Malformed string")}n[o++]=224|i>>12,n[o++]=128|i>>6&63,n[o++]=128|63&i}}return n.subarray(0,o)},t.prototype.toShortString=function(t,e){for(var n=new Uint16Array(e),o=0,r=0,i=t.length;o<e&&r<i;o++){var c=t[r++];switch(c>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n[o]=c;break;case 12:case 13:if(!(r<i))throw new Error("Unfinished UTF-8 octet sequence");n[o]=(31&c)<<6|63&t[r++];break;case 14:if(!(r+1<i))throw new Error("Unfinished UTF-8 octet sequence");n[o]=(15&c)<<12|(63&t[r++])<<6|63&t[r++];break;case 15:if(!(r+2<i))throw new Error("Unfinished UTF-8 octet sequence");var a=((7&c)<<18|(63&t[r++])<<12|(63&t[r++])<<6|63&t[r++])-65536;if(!(0<=a&&a<=1048575))throw new Error("Character outside valid Unicode range: 0x"+a.toString(16));n[o++]=a>>10&1023|55296,n[o]=1023&a|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+c.toString(16))}}return o<e&&(n=n.subarray(0,o)),String.fromCharCode.apply(String,n)},t.prototype.toLongString=function(t,e){for(var n=[],o=new Uint16Array(65535),r=0,i=0,c=t.length;r<e&&i<c;r++){var a=t[i++];switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o[r]=a;break;case 12:case 13:if(!(i<c))throw new Error("Unfinished UTF-8 octet sequence");o[r]=(31&a)<<6|63&t[i++];break;case 14:if(!(i+1<c))throw new Error("Unfinished UTF-8 octet sequence");o[r]=(15&a)<<12|(63&t[i++])<<6|63&t[i++];break;case 15:if(!(i+2<c))throw new Error("Unfinished UTF-8 octet sequence");var s=((7&a)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536;if(!(0<=s&&s<=1048575))throw new Error("Character outside valid Unicode range: 0x"+s.toString(16));o[r++]=s>>10&1023|55296,o[r]=1023&s|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+a.toString(16))}if(r>=65534){var l=r+1;n.push(String.fromCharCode.apply(String,o.subarray(0,l))),e-=l,r=-1}}return r>0&&n.push(String.fromCharCode.apply(String,o.subarray(0,r))),n.join("")},t.prototype.toString=function(t){var e=t.length;return 0===e?"":e<1e5?this.toShortString(t,e):this.toLongString(t,e)},t.prototype.encrypt=function(t,e){return"string"==typeof t&&(t=this.toBytes(t)),"string"==typeof e&&(e=this.toBytes(e)),null==t||0===t.length?t:this.toUint8Array(this.encryptUint32Array(this.toUint32Array(t,!0),this.toUint32Array(this.fixk(e),!1)),!1)},t.prototype.encryptToString=function(t,e){return this.encrypt(t,e).toString("base64")},t.prototype.decrypt=function(t,e){return"string"==typeof t&&(t=t.toString()),"string"==typeof e&&(e=this.toBytes(e)),null==t||0===t.length?t:this.toUint8Array(this.decryptUint32Array(this.toUint32Array(t,!1),this.toUint32Array(this.fixk(e),!1)),!0)},t.prototype.decryptToString=function(t,e){return this.toString(this.decrypt(t,e))}}(),cc._RF.pop()},{}]},{},["DataMgr","GamePlayCtrl","FontConfig","LabelLocalized","RichTextLocalized","i18n","polyglot","buffs","character","explosion","hook","itemBuy","itemHook","line","moneyFly","playToast","player","shop","skill","skillMgr","skillPowerReel","AutoResolution","CommonUtils","Constants","CustomFontLabel","LanguageManager","MyEventDispatcher","SoundUtil","Timer","xxtea"]);